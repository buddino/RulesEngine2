package it.cnit.gaia.rulesengine.rules;

import it.cnit.gaia.rulesengine.model.GaiaRule;
import it.cnit.gaia.rulesengine.model.annotation.LoadMe;
import it.cnit.gaia.rulesengine.model.annotation.LogMe;
import it.cnit.gaia.rulesengine.model.annotation.URI;

public class ExploitNaturalLight extends GaiaRule{
	//URIs
	@LogMe 	@LoadMe 	@URI
	public String luminosity_uri;
	@LogMe 	@LoadMe 	@URI
	public String temperature_uri;
	@LogMe 	@LoadMe	@URI
	public String power_uri;

	//Thresholds
	@LogMe 	@LoadMe(required = false)
	public Double luminosity_threshold = 5.0;
	@LogMe @LoadMe(required = false)
	public Double power_threshold = 3000000.0;
	@LogMe @LoadMe(required = false)
	public Double temperature_threshold = Double.POSITIVE_INFINITY;

	//Measurements
	@LogMe
	public Double luminosity_value;
	@LogMe
	public Double temperature_value;
	@LogMe
	public Double power_value;

	//TODO Inserisce la sogliatura sulla luminositÃ  interna

	@Override
	public boolean condition(){
		luminosity_value = measurements.getLatestFor(luminosity_uri).getReading();
		temperature_value = measurements.getLatestFor(temperature_uri).getReading();
		power_value = measurements.getLatestFor(power_uri).getReading();
		return luminosity_value > luminosity_threshold && power_value > power_threshold && temperature_value < temperature_threshold;
	}

}

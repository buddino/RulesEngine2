<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GAIA | RulesEngine</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <link rel="stylesheet" href="bootstrap/mdb/mdb.css">
    <link rel="stylesheet" href="dist/css/lobibox.css"/>
    <link rel="stylesheet" href="css/dashboard.css"/>
    <link rel="stylesheet" href="css/gaia.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.1/sockjs.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.6/handlebars.min.js"></script>
    <script src="dist/js/lobibox.js"></script>

    <style>

    </style>
    <script>
        var URL = "";
        function switchView(name) {
            $(".main").hide();
            $("#" + name).show();
            $(".viewBtn").removeClass("active");
            $("#" + name + "Btn").parent().addClass("active");
        }
    </script>


</head>
<body>
<div class="container-fluid">
    <!--Navigation-->
    <div class="col-sm-3 col-md-2 sidebar">
        <div class="form-group form-inline">
            <label for="selectSchool">School:</label>
            <input class="form-control" id="selectSchool" type="text">
        </div>
        <ul class="nav nav-sidebar">
            <li class="viewBtn active"><a id="websocketBtn" data-view="websocketView" href="#">Notifications <span
                    id="notificationCounter" class="badge pull-right">0</span> </a></li>
            <li class="viewBtn"><a id="logBtn" data-view="logView" href="#">Reports</a></li>
            <li class="viewBtn"><a id="reloadBtn" data-view="#" href="#">Reload rules</a></li>
            <li class="viewBtn"><a id="ruleTreeBtn" data-view="ruleTree" href="#"
                                   style="text-decoration: line-through;">Rule tree</a></li>
        </ul>
    </div>

    <!--Websocket-->
    <div id="websocketView" class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        <h2 class="page-header">Websocket connection</h2>
        <div id="main-content" class="container">
            <div class="row">
                <div class="col-md-6">
                    <form id="wsform" class="form-inline">
                        <div class="form-group">
                            <button id="connectBtn" class="btn btn-default" type="submit">Connect</button>
                            <button id="disconnectBtn" class="btn btn-default" disabled type="submit">Disconnect
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <h2 class="sub-header">Notification data:</h2>
        <div id="expanded-notification">
        </div>
    </div>

    <!--Event log-->
    <div id="logView" class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" hidden>
        <form id="eventsForm" class="form-inline" style="padding-bottom: 2em">
            <label for="limit">Limit:</label>
            <input class="form-control" value="10" id="limit" type="number" min="1">
            <label for="limit">From:</label>
            <input class="form-control" type="text">
            <label for="limit">To:</label>
            <input class="form-control" type="text">
            <button type="submit" class="btn btn-default btn-sm">Query</button>
        </form>
        <ul id="eventList" class="list-group panel">
        </ul>
    </div>

    <!--TODO-->
    <div id="ruleTree" class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main" hidden>

    </div>


</div>


</body>

<!--Templates-->
<script id="event-template" type="text/x-handlebars-template">
    <div>
        <div class="list-group-items" data-toggle="collapse" data-target="#{{rid}}">
            <a class="nostyle"><h4 class="list-group-items-heading">{{fields.name}}<span
                    class="pull-right">{{timestamp}}</span></h4></a>
        </div>
        <div id="{{rid}}" class="collapse">
            <dl class="dl-horizontal">
                <dt>Rule name:</dt>
                <dd>{{fields.name}}</dd>
                <dt>Suggestion</dt>
                <dd>{{fields.suggestion}}</dd>
                <dt>Description:</dt>
                <dd>{{fields.description}}</dd>
            </dl>
            <dl class="dl-horizontal">
                {{#each values}}
                <dt>{{@key}}</dt>
                <dd>{{this}}</dd>
                {{/each}}
            </dl>
        </div>
    </div>
</script>


<script id="notification-expand-template" type="text/x-handlebars-template">
    <div class="panel panel-default">
        <div class="panel-heading">{{ruleName}}</div>
        <dl class="dl-horizontal">
            <dt>School</dt>
            <dd>{{school.name}}</dd>
            <dt>Timestamp</dt>
            <dd>{{timestamp}}</dd>
            <dt>Area</dt>
            <dd>{{area.id}}</dd>
            <dt>Rule class:</dt>
            <dd>{{ruleClass}}</dd>
            <dt>Rule name:</dt>
            <dd>{{ruleName}} [{{rule}}]</dd>
            {{#each values}}
            <dt>{{@key}}</dt>
            <dd>{{this}}</dd>
            {{/each}}
        </dl>
    </div>
</script>

<script id="notification-template" type="text/x-handlebars-template">
    {{timestamp}}<br>Area: {{area.id}}<br>{{suggestion}}
</script>
<script src="js/gaia_notifications.js"></script>
<script src="js/gaia_event.js"></script>
</html>
